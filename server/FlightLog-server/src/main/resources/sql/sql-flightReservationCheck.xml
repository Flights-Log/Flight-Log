<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bitc.fullstack503.flightlog.flightlogserver.mapper.FlightChooseServiceMapper">

    <!-- reservationNumber에 해당하는 항목들을 List 형태로 반환 -->
    <select id="flightReservationCheck" parameterType="String" resultType="bitc.fullstack503.flightlog.flightlogserver.dto.FlightReservationCheckDTO">
        select
        fr.flight_reno as flight_reno,
        frm.flight_mem_lastName as flight_member_lastName,
        frm.flight_mem_firstName as flight_member_first_name,
        fi.flight_info_startCity as flight_start_city,
        fi.flight_info_arrivalCity as flight_arrival_city,
        DATE_FORMAT(fr.flight_reserveSdate, '%Y-%m-%d') as flight_reserve_start_date,
        fi.flight_info_startTime as flight_info_start_time,
        DATE_FORMAT(fr.flight_reserveEdate, '%Y-%m-%d') as flight_reserve_end_date,
        fi.flight_info_arrivalTime as flight_info_arrival_time,
        fr.flight_memberNum as flight_member_num,
        frm.flight_mem_start_seatNum as flight_mem_start_seatNum,
        frm.flight_passport as flight_passport,
        frm.flight_mem_luggage as flight_mem_luggage

        from flight_reserve fr
        join flight_reserve_member frm
        on fr.flight_reno = frm.flight_reno
        join flight_info fi
        on fr.flight_start_id = fi.flight_id
        where fr.flight_reno = #{reservationNumber}
    </select>



</mapper>
